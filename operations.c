#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <sys/wait.h>
#include <fcntl.h>
#include <math.h>
#include <pthread.h>
#include <dirent.h>

#define PLAGE 8

typedef struct attribut{
	float* fichier;
	int deb;
	pthread_t th;
	float retour;
	int taille;
}ATTR;
					// CE FICHIER NE CONTIENT QUE LES OPERATIONS DEMANDEES //

/* Cette fonction permet de renvoyer le minimum des valeurs du fichier */
void* min(void* th){
	int i;
	ATTR* t = (ATTR*) th;
	float min = t->fichier[t->deb];
	for(i = 1; t->deb+i < t->taille && i<PLAGE; i++){
		if(min > t->fichier[t->deb+i]){
			//printf("position : %d\n", position_deb);
			min = t->fichier[t->deb+i];
		}
	}
	t->retour = min;
	return NULL;
}

/* Cette fonction permet de renvoyer le minimum */
void* max(void* th){
	int i;
	ATTR* t = (ATTR*) th;
	float max = t->fichier[t->deb];
	for(i = 1; t->deb+i < t->taille && i<PLAGE; i++){
		if(max < t->fichier[t->deb+i]){
			//printf("position : %d\n", position_deb);
			max = t->fichier[t->deb+i];
		}
	}
	t->retour = max;
	return NULL;

}

/* Cette fonction permet de renvoyer le maximumdes valeurs du fichier */
void* sum(void* th){
	int i;
	ATTR* t = (ATTR*) th;
	float sum = t->fichier[t->deb];
	for(i = 1; t->deb+i < t->taille && i<PLAGE; i++){
		sum = sum + t->fichier[t->+i];
	}
	t->retour = sum;
	return NULL;
}

/* Cette fonction permet de renvoyer la somme des valeurs du fichier */
void* sum(void* th){
	int i;
	ATTR* t = (ATTR*) th;
	float sum = t->fichier[t->deb];
	for(i = 1; t->deb+i < t->taille && i<PLAGE; i++){
		sum = sum + t->fichier[t->i];
	}
	t->retour = sum;
	return NULL;
}

/* Cette fonction permet de renvoyer la moyenne des valeurs du fichier */
void* avg(void* th){
	int i;
	ATTR* t = (ATTR*) th;
	float avg = 0.0;
	float sum = t->fichier[t->deb];
	for(i = 1; t->deb+i < t->taille && i<PLAGE; i++){
		sum = sum + t->fichier[t->i];
	}
	avg = sum/t->taille;
	t->retour = avg;
	return NULL;
}

/* Cette fonction permet de renvoyer la somme des valeurs impaires du fichier */
void* odd(void* th){
	int i;
	ATTR* t = (ATTR*) th;
	float odd = t->fichier[t->deb];
	for(i = 1; t->deb+i < t->taille && i<PLAGE; i++){
		if(fmod(t->fichier[t->i], 2.0) == 1){
			odd++;
		}
	}
	t->retour = odd;
	return NULL;
}

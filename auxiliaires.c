#include <operations.h>

					// CE FICHIER CONTIENT LES FONCTIONS AIDANT A LA REALISATION DU PROGRAMME //

/* Permet de renvoyer le nombre lu sur une ligne dans le fichier fd, à la position indiquée */
float lecture_ligne(int fd, int* position_deb){
	
			/// Déclarations des variables ///
	/* verif -> permet de verifier le renvoie du read pour savoir si le fichier contient encore des valeurs,
	 * nombre_ligne -> donne le nombre contenu à la ligne courante, ligne -> stocke les caractères formant 
	 * le nombre lu sur la ligne*/
	int i, verif;
	float nombre_ligne;
	char* ligne;
	
			/// Initialisations ///
	ligne = malloc(sizeof(char)*20);
	
			/// Vérification du contenu du fichier ///
	lseek(fd, *position_deb, SEEK_SET); //se place à la position voulue
	verif = read(fd, ligne, 1); //lecture du premier caractère
	if(verif == 0){ //Vérification si le fichier contient encore des valeurs ou non
		printf("Le fichier est vide\n");
		exit(EXIT_FAILURE);
	}

			/// Lecture d'une ligne ///
	for(i = 0; verif != 0 && ligne[i] != '\n' ; i++){ // Si le verif est bon alors on peut lire la ligne
		verif = read(fd, ligne+(i+1), 1); //lecture d'un caractère
		(*position_deb)++;
	}
			/// Conversion de nombre en chaine de caractère, en float ///
	nombre_ligne = atof(ligne);
	free(ligne);
	return nombre_ligne;
}

/* Cette fonction permet de renvoyer le minimum d'un tableau de taille donnée n */
float min_tab(int n, float tab[n]){
	
			/// Déclarations des variables ///
	int i;
	float min = tab[0]; //initialisation du minimum à la première case du tableau
	
			/// Recherche du minimum ///
	for(i=1; i<n; i++){
		if(min > tab[i]) {
			min = tab[i];
		}
	}
	return min;
}

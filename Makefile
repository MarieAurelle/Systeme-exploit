# project name (generate executable with this name)
TARGET = reduction
TARGETPATH = ./bin

CC = gcc
# compiling flags here
CFLAGS = -Wall -I. -lm -lpthread

LINKER = gcc -o
# linking flags here
LFLAGS = -Wall -I. -lm -lpthread

# change these to set the proper directories where each files shoould be
SRCDIR = src
OBJDIR = obj
BINDI = bin

SOURCES  = operations.c auxiliaires.c process_chef.c process_directeur.c main.c 
INCLUDES = auxiliaires.h operations.h process_chef.h process_directeur.h
OBJECTS=$(SOURCES:.c=.o )
rm = rm -f

main.o: process_directeur.o process_directeur.h main.c
	$(CC) $(CFLAGS) -c $< -o $(OBJDIR)/$@
 
process_directeur.o : process_chef.o process_chef.h process_directeur.c
	$(CC) $(CFLAGS) -c $< -o $(OBJDIR)/$@

process_chef.o : auxiliaires.o auxiliaires.h process_chef.c
	$(CC) $(CFLAGS) -c $< -o $(OBJDIR)/$@
	
auxiliaires.o : operations.o operations.h auxiliaires.c 
	$(CC) $(CFLAGS) -c $< -o $(OBJDIR)$@
	
operations.o : operations.c
	$(CC) $(CFLAGS) -c operations.c -o $(OBJDIR)$@
	
$(TARGET): obj
	@$(LINKER) $(TARGETPATH)/$(TARGET) $(LFLAGS) $(OBJECTS)
	@echo "Linking complete!"

.PHONEY: clean
clean:
	@$(rm) $(OBJECTS)
	@echo "Cleanup complete!"

.PHONEY: remove
remove: clean
	@$(rm) $(BINDIR)/$(TARGET)
	@echo "Executable removed!"

# project name (generate executable with this name)
TARGET = reduction
TARGETPATH = ./bin

CC = gcc
# compiling flags here
CFLAGS = -Wall -lm -pthread -g

# change these to set the proper directories where each files should be
OBJ_DIR = obj
SRC_DIR = src
BIN_DIR = bin

$(TARGET) : $(OBJ_DIR)/main.o $(OBJ_DIR)/process_directeur.o $(OBJ_DIR)/process_chef.o $(OBJ_DIR)/auxiliaires.o $(OBJ_DIR)/operations.o
	$(CC) $(OBJ_DIR)/main.o $(OBJ_DIR)/process_directeur.o $(OBJ_DIR)/process_chef.o $(OBJ_DIR)/auxiliaires.o $(OBJ_DIR)/operations.o -o $(BIN_DIR)/$(TARGET) $(CFLAGS)
	
$(OBJ_DIR)/operations.o : $(SRC_DIR)/operations.c $(SRC_DIR)/operations.h 
	$(CC) $(CFLAGS) -c $(SRC_DIR)/operations.c -o $(OBJ_DIR)/operations.o

$(OBJ_DIR)/auxiliaires.o : $(OBJ_DIR)/operations.o $(SRC_DIR)/auxiliaires.c $(SRC_DIR)/auxiliaires.h
	$(CC) $(CFLAGS) -c $(SRC_DIR)/auxiliaires.c -o $(OBJ_DIR)/auxiliaires.o

$(OBJ_DIR)/process_chef.o : $(OBJ_DIR)/auxiliaires.o $(SRC_DIR)/process_chef.c $(SRC_DIR)/process_chef.h
	$(CC) $(CFLAGS) -c $(SRC_DIR)/process_chef.c -o $(OBJ_DIR)/process_chef.o

$(OBJ_DIR)/process_directeur.o : $(OBJ_DIR)/process_chef.o $(SRC_DIR)/process_directeur.c $(SRC_DIR)/process_directeur.h
	$(CC) $(CFLAGS) -c $(SRC_DIR)/process_directeur.c -o $(OBJ_DIR)/process_directeur.o
	
$(OBJ_DIR)/main.o: $(OBJ_DIR)/process_directeur.o $(SRC_DIR)/main.c
	$(CC) $(CFLAGS) -c $(SRC_DIR)/main.c -o $(OBJ_DIR)/main.o

clean:
	rm -rf $(OBJ_DIR)/*.o $(BIN_DIR)/reduction

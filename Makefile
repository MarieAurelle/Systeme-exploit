# désactivation des règles implicites
.SUFFIXES:

# définition des variables
CFLAGS = -Wall -lpthread -lm

# Dossier racine du code :
CODE := $(shell pwd)

# Dossier de l'executable
EXEDIR := $(CODE)/bin/$(shell arch)

# Adresse des sources, des objets et des includes :
SRCDIR = $(CODE\src)/src
OBJDIR = $(CODE\obj)/obj
INCDIR = $(CODE\headers)/include

all : reduction
reduction : reduction.o operations.o process_chef.o process_directeur.o auxiliaires.o
	$ gcc src/*.c -I headers -o reduction reduction.o operations.o process_chef.o process_directeur.o auxiliaires.o
# ici on fait l'édition de lien entre tous les fichiers en .o

reduction.o : process_directeur.o process_directeur.h main.c
	$ gcc src/*.c -I headers $(CFLAGS) -c main.c -o reduction.o -lpthread -lm
 
process_directeur.o : process_chef.o process_chef.h process_directeur.c
	$ gcc src/*.c -I headers $(CFLAGS) -c process_directeur.c -o process_directeur.o

process_chef.o : auxiliaires.o auxiliaires.h process_chef.c
	$ gcc src/*.c -I headers $(CFLAGS) -c process_chef.c -o process_chef.o
	
auxiliaires.o : operations.o operations.h auxiliaires.c 
	$ gcc src/*.c -I headers $(CFLAGS) -c auxiliaires.c -o auxiliaires.o
	
operations.o : operations.c
	$ gcc $(CFLAGS) -c operations.c -o operations.o

clean :
	-rm reduction

# reste a trouver comment faire apparaitre l'exe dans le fichier Fichiers

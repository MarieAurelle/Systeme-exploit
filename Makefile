# project name (generate executable with this name)
TARGET = reduction
TARGETPATH = ./bin

CC = gcc
# compiling flags here
CFLAGS = -Wall -lm -lpthread

# change these to set the proper directories where each files shoould be
OBJ_DIR = obj
SRC_DIR = src
INC_DIR = include
BIN_DIR = bin

#SOURCES  = operations.c auxiliaires.c process_chef.c process_directeur.c main.c 
#INCLUDES = auxiliaires.h operations.h process_chef.h process_directeur.h
#OBJECTS  = $(SOURCES:$(SRCDIR)/%.c=$(OBJDIR)/%.o)

$(TARGET) : $(OBJ_DIR)/main.o $(OBJ_DIR)/process_directeur.o $(OBJ_DIR)/process_chef.o $(OBJ_DIR)/auxiliaires.o $(OBJ_DIR)/operations.o
	$(CC) $(CFLAGS) $(OBJ_DIR)/main.o $(OBJ_DIR)/process_chef.o $(OBJ_DIR)/process_directeur.o $(OBJ_DIR)/auxiliaires.o $(OBJ_DIR)/operations.o -o $(BIN_DIR)/$(TARGET)
	
$(OBJ_DIR)/operations.o : $(INC_DIR)/operations.h $(SRC_DIR)/operations.c
	$(CC) $(CFLAGS) -c $(SRC_DIR)/operations.c -o $(OBJ_DIR)/operations.o

$(OBJ_DIR)/auxiliaires.o :  $(INC_DIR)/operations.h $(INC_DIR)/auxiliaires.h $(OBJ_DIR)/operations.o $(SRC_DIR)/auxiliaires.c
	$(CC) $(CFLAGS) -c $(SRC_DIR)/auxiliaires.c -o $(OBJ_DIR)/auxiliaires.o

$(OBJ_DIR)/process_chef.o : $(OBJ_DIR)/auxiliaires.o $(SRC_DIR)/process_chef.c $(INC_DIR)/process_chef.h
	$(CC) $(CFLAGS) -c $(SRC_DIR)/process_chef.c -o $(OBJ_DIR)/process_chef.o

$(OBJ_DIR)/process_directeur.o : $(OBJ_DIR)/process_chef.o $(SRC_DIR)/process_directeur.c $(INC_DIR)/process_directeur.h
	$(CC) $(CFLAGS) -c $(SRC_DIR)/process_directeur.c -o $(OBJ_DIR)/process_directeur.o
	
$(OBJ_DIR)/main.o: $(OBJ_DIR)/process_directeur.o $(SRC_DIR)/main.c
	$(CC) $(CFLAGS) -c $(SRC_DIR)/main.c -o $(OBJ_DIR)/main.o
	
#$(TARGET): obj
#	@$(LINKER) $(TARGETPATH)/$(TARGET) $(LFLAGS) $(OBJECTS)
#	@echo "Linking complete!"

clean:
	rm -rf $(OBJ_DIR)/*.o $(BIN_DIR)/*

#include "operations.h"
					// CE FICHIER NE CONTIENT QUE LES OPERATIONS DEMANDEES //

/* Cette fonction permet de renvoyer le minimum des valeurs du fichier */
void* min(void* th){
	int i;
	ATTR* t = (ATTR*) th;
	float min = t->fichier[t->deb];
	for(i = 1; t->deb+i < t->taille && i<PLAGE+1; i++){
		if(min > t->fichier[t->deb+i]){
			min = t->fichier[t->deb+i];
		}
	}
	t->retour = min;
	printf("retour : %f\n", t->retour);
	return NULL;
}

/*Cette fonction permet de renvoyer le minimum des valeurs d'un tableau
 * */
float min_tab(int n, float tab[n]){
	int i;
	if(n < 0) return -1;
	float min = tab[0];
	for(i=1; i<n; i++){
		if(min > tab[i]) {
			min = tab[i];
		}
	}
	return min;
}

/*Cette fonction permet de renvoyer le maximum des valeurs d'un tableau pointé par 
 * le champ fichier de la structure de type ATTR */
void* max(void* th){
	int i;
	ATTR* t = (ATTR*) th;
	float max = t->fichier[t->deb];
	for(i = 1; t->deb+i < t->taille && i<PLAGE; i++){
		if(max < t->fichier[t->deb+i]){
			max = t->fichier[t->deb+i];
		}
	}
	t->retour = max;
	return NULL;

}

/* Cette fonction permet de renvoyer le maximum des valeurs d'un tableau
 *  */
float max_tab(int n, float tab[n]){
	int i;
	if(n < 0) return -1;
	float max = tab[0];
	for(i=1; i<n; i++){
		if(max < tab[i]) {
			max = tab[i];
		}
	}
	return max;
}

/* Cette fonction permet de renvoyer la somme des valeurs du tableau
 * pointé par le champ fichier de la structure de type ATTR */
void* sum(void* th){
	int i;
	ATTR* t = (ATTR*) th;
	float sum = t->fichier[t->deb];
	for(i = 1; t->deb+i < t->taille && i<PLAGE; i++){
		sum = sum + t->fichier[t->deb+i];
	}
	t->retour = sum;
	return NULL;
}

/* Cette fonction permet de renvoyer la somme des valeurs d'un tableau
 **/
float sum_tab(int n, float tab[n]){
	int i;
	if(n < 0) return -1;
	float sum = tab[0];
	for(i = 1; i < n; i++){
		sum = sum + tab[i];
	}
	return sum;
}

/* Cette fonction permet de renvoyer la moyenne des valeurs du fichier */
void* avg(void* th){
	int i;
	float compteur = 0.0;
	ATTR* t = (ATTR*) th;
	float avg = 0.0;
	float sum = t->fichier[t->deb];
	compteur++;
	for(i = 1; t->deb+i < t->taille && i<PLAGE; i++){
		sum = sum + t->fichier[t->deb+i];
		compteur++;
	}
	avg = sum/compteur;
	t->retour = avg;
	return NULL;
}

/*Cette fonction permet de renvoyer la moyenne des valeurs d'un tableau
 * */
float avg_tab(int n, float tab[n]){
	int i;
	if(n < 0) return -1;
	float avg = 0.0;
	float sum = tab[0];
	for(i = 1; i < n; i++){
		sum = sum + tab[i];
	}
	avg = sum/(n*1.0);
	return avg;
}

/* Cette fonction permet de renvoyer la somme des valeurs impaires d'un tableau
 * pointé par le champ fichier de la structure de type ATTR */
void* odd(void* th){
	int i;
	ATTR* t = (ATTR*) th;
	float odd = 0.0;
	for(i = 0; t->deb+i < t->taille && i<PLAGE; i++){
		if(fmod(t->fichier[t->deb+i], 2.0) == 1){
			odd++;
		}
	}
	t->retour = odd;
	return NULL;
}

/* Cette fonction permet de renvoyer la somme des valeurs impaires d'un tableau
 * */
float odd_tab(int n, float tab[n]){
	int i;
	if(n < 0) return -1;
	float odd = 0;
	for(i = 0; i < n; i++){
		odd = odd + tab[i];
	}
	return odd;
}
